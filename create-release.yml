parameters:
- name: tag
  displayName: The Release Tag (e.g. "v2022.03.04")
  type: string
- name: isDraft
  displayName: Is a Draft Release?
  type: boolean
  default: false

trigger: none

# GitHub Release
# Create, edit, or delete a GitHub release
# https://github.com/Microsoft/azure-pipelines-tasks/tree/master/Tasks/GitHubReleaseV0
- task: GitHubRelease@0
  inputs:
    gitHubConnection: Azure
    repositoryName: '$(Build.Repository.Name)' 
    action: 'create' # Options: create, edit, delete
    target: '$(Build.SourceVersion)' # Required when action == Create || Action == Edit
    tagSource: 'manual' # Required when action == Create# Options: auto, manual
    #tagPattern: # Optional
    tag: ${{ parameters.tag }}
    title: 'MLZ - ${{ parameters.tag }}'
    #releaseNotesSource: 'file' # Optional. Options: file, inline
    #releaseNotesInline: Use this option to manually enter release notes. Use with releaseNotesSource = inline
    #releaseNotesFilePath: # Optional. Use the contents of a file as release notes. 
    #releaseNotes: # Optional
    #assets: '$(Build.ArtifactStagingDirectory)/*' # Optional
    #assetUploadMode: 'delete' # Optional. Options: delete, replace
    isDraft: ${{ parameters.isDraft }} # Optional
    #isPreRelease: false # Optional
    addChangeLog: true # Optional
    compareWith: 'lastFullRelease' # Required when addChangeLog == True. Options: lastFullRelease, lastRelease, lastReleaseByTag
    #releaseTag: # Required when compareWith == LastReleaseByTag